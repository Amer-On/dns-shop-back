[2023-12-12 00:55:01.296] Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/initializer.py", line 35, in initialize
    await init_db()
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/repositories/db/helpers.py", line 23, in init_db
    await Tortoise.generate_schemas()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/__init__.py", line 640, in generate_schemas
    await generate_schema_for_client(connection, safe)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/utils.py", line 31, in generate_schema_for_client
    await generator.generate_from_string(schema)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/schema_generator.py", line 448, in generate_from_string
    await self.client.execute_script(creation_string)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 34, in _translate_exceptions
    return await self._translate_exceptions(func, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 82, in _translate_exceptions
    return await func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 150, in execute_script
    async with self.acquire_connection() as connection:
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/client.py", line 326, in __aenter__
    await self.ensure_connection()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/client.py", line 322, in ensure_connection
    await self.client.create_connection(with_db=True)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 59, in create_connection
    self._pool = await self.create_pool(password=self.password, **self._template)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 65, in create_pool
    return await asyncpg.create_pool(None, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/fa-tmpl-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1099, in create_connection
    raise exceptions[0]
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1081, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 984, in _connect_sock
    await self.sock_connect(sock, address)
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/selector_events.py", line 647, in sock_connect
    return await fut
           ^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/selector_events.py", line 687, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 61] Connect call failed ('127.0.0.1', 6500)

[2023-12-12 00:55:01.296] Application startup failed. Exiting.
[2023-12-12 01:00:42.064] Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/initializer.py", line 35, in initialize
    await init_db()
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/repositories/db/helpers.py", line 23, in init_db
    await Tortoise.generate_schemas()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/__init__.py", line 640, in generate_schemas
    await generate_schema_for_client(connection, safe)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/utils.py", line 31, in generate_schema_for_client
    await generator.generate_from_string(schema)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/schema_generator.py", line 448, in generate_from_string
    await self.client.execute_script(creation_string)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 34, in _translate_exceptions
    return await self._translate_exceptions(func, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 82, in _translate_exceptions
    return await func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 150, in execute_script
    async with self.acquire_connection() as connection:
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/client.py", line 326, in __aenter__
    await self.ensure_connection()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/client.py", line 322, in ensure_connection
    await self.client.create_connection(with_db=True)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 59, in create_connection
    self._pool = await self.create_pool(password=self.password, **self._template)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 65, in create_pool
    return await asyncpg.create_pool(None, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1099, in create_connection
    raise exceptions[0]
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1081, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 984, in _connect_sock
    await self.sock_connect(sock, address)
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/selector_events.py", line 647, in sock_connect
    return await fut
           ^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/selector_events.py", line 687, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 61] Connect call failed ('127.0.0.1', 6500)

[2023-12-12 01:00:42.064] Application startup failed. Exiting.
[2023-12-12 01:02:40.464] Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/opt/homebrew/Cellar/python@3.12/3.12.0/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/initializer.py", line 35, in initialize
    await init_db()
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/repositories/db/helpers.py", line 23, in init_db
    await Tortoise.generate_schemas()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/__init__.py", line 640, in generate_schemas
    await generate_schema_for_client(connection, safe)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/utils.py", line 31, in generate_schema_for_client
    await generator.generate_from_string(schema)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/schema_generator.py", line 448, in generate_from_string
    await self.client.execute_script(creation_string)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 34, in _translate_exceptions
    return await self._translate_exceptions(func, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 82, in _translate_exceptions
    return await func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 150, in execute_script
    async with self.acquire_connection() as connection:
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/client.py", line 326, in __aenter__
    await self.ensure_connection()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/client.py", line 322, in ensure_connection
    await self.client.create_connection(with_db=True)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 59, in create_connection
    self._pool = await self.create_pool(password=self.password, **self._template)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 65, in create_pool
    return await asyncpg.create_pool(None, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 876, in __connect_addr
    await connected
asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "user"

[2023-12-12 01:02:40.464] Application startup failed. Exiting.
[2023-12-12 01:07:36.484] LaXFxmgzSZ-rRqQ2j2e2FQ Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 271, in app
    raise RequestValidationError(_normalize_errors(errors), body=body)
fastapi.exceptions.RequestValidationError: [{'type': 'missing', 'loc': ('query', 'user_repository'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.5/v/missing'}]

[2023-12-12 02:05:03.698] P8y36SXVSwmOxILuLzqrWA Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/header.py", line 24, in dispatch
    response = await call_next(request)
               
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/logging.py", line 46, in dispatch
    response = typing.cast(StreamingResponse, await call_next(request))
                                              
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
                   
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
           
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/api/v1/auth.py", line 16, in register_handler
    return await service.register(request_data)
           
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/services/auth.py", line 19, in register
    return await self.repo.create(data)
           
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/repositories/db/user.py", line 17, in create
    user = await self.model.create(
           
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/models.py", line 1136, in create
    await instance.save(using_db=db, force_create=True)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/models.py", line 944, in save
    await executor.execute_insert(self)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/executor.py", line 227, in execute_insert
    insert_result = await self.db.execute_insert(self.insert_query, values)
                    
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 34, in _translate_exceptions
    return await self._translate_exceptions(func, *args, **kwargs)
           
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 86, in _translate_exceptions
    raise IntegrityError(exc)
tortoise.exceptions.IntegrityError: duplicate key value violates unique constraint "user_pkey"
DETAIL:  Key (login)=(user) already exists.

[2023-12-12 02:05:03.699] Exception in ASGI application
Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/applications.py", line 292, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/header.py", line 24, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/logging.py", line 46, in dispatch
    response = typing.cast(StreamingResponse, await call_next(request))
                                              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/api/v1/auth.py", line 16, in register_handler
    return await service.register(request_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/services/auth.py", line 19, in register
    return await self.repo.create(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/repositories/db/user.py", line 17, in create
    user = await self.model.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/models.py", line 1136, in create
    await instance.save(using_db=db, force_create=True)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/models.py", line 944, in save
    await executor.execute_insert(self)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/executor.py", line 227, in execute_insert
    insert_result = await self.db.execute_insert(self.insert_query, values)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 34, in _translate_exceptions
    return await self._translate_exceptions(func, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 86, in _translate_exceptions
    raise IntegrityError(exc)
tortoise.exceptions.IntegrityError: duplicate key value violates unique constraint "user_pkey"
DETAIL:  Key (login)=(user) already exists.
[2023-12-12 02:05:12.345] wOYEATKaQEm4t_AkQJPE4w Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/header.py", line 24, in dispatch
    response = await call_next(request)
               
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/logging.py", line 46, in dispatch
    response = typing.cast(StreamingResponse, await call_next(request))
                                              
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    content = await serialize_response(
              
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 179, in serialize_response
    return jsonable_encoder(response_content)
           
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/encoders.py", line 238, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]

[2023-12-12 02:05:12.346] Exception in ASGI application
Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/encoders.py", line 230, in jsonable_encoder
    data = dict(obj)
           ^^^^^^^^^
TypeError: 'coroutine' object is not iterable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/encoders.py", line 235, in jsonable_encoder
    data = vars(obj)
           ^^^^^^^^^
TypeError: vars() argument must have __dict__ attribute

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/applications.py", line 292, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/header.py", line 24, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/logging.py", line 46, in dispatch
    response = typing.cast(StreamingResponse, await call_next(request))
                                              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 179, in serialize_response
    return jsonable_encoder(response_content)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/encoders.py", line 238, in jsonable_encoder
    raise ValueError(errors) from e
ValueError: [TypeError("'coroutine' object is not iterable"), TypeError('vars() argument must have __dict__ attribute')]
[2023-12-12 02:06:20.179] KKz6oe5dQsCq0LMa0f1mXQ Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/header.py", line 24, in dispatch
    response = await call_next(request)
               
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/logging.py", line 46, in dispatch
    response = typing.cast(StreamingResponse, await call_next(request))
                                              
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
                   
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
           
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/api/v1/auth.py", line 16, in register_handler
    return await service.register(request_data)
           
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/services/auth.py", line 19, in register
    return await self.repo.create(data)
           
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/repositories/db/user.py", line 21, in create
    return await UserDTO.from_tortoise_orm(user)
           
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/contrib/pydantic/base.py", line 85, in from_tortoise_orm
    await obj.fetch_related(*fetch_fields)
          
AttributeError: 'coroutine' object has no attribute 'fetch_related'

[2023-12-12 02:06:20.180] Exception in ASGI application
Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/applications.py", line 292, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/header.py", line 24, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/logging.py", line 46, in dispatch
    response = typing.cast(StreamingResponse, await call_next(request))
                                              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/api/v1/auth.py", line 16, in register_handler
    return await service.register(request_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/services/auth.py", line 19, in register
    return await self.repo.create(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/repositories/db/user.py", line 21, in create
    return await UserDTO.from_tortoise_orm(user)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/contrib/pydantic/base.py", line 85, in from_tortoise_orm
    await obj.fetch_related(*fetch_fields)
          ^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'fetch_related'
[2023-12-12 02:06:29.987] jyW8BoZGStCybeTJ4TlzSQ Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/header.py", line 24, in dispatch
    response = await call_next(request)
               
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/logging.py", line 46, in dispatch
    response = typing.cast(StreamingResponse, await call_next(request))
                                              
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
                   
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
           
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/api/v1/auth.py", line 16, in register_handler
    return await service.register(request_data)
           
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/services/auth.py", line 19, in register
    return await self.repo.create(data)
           
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/repositories/db/user.py", line 17, in create
    user = await self.model.create(
           
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/models.py", line 1136, in create
    await instance.save(using_db=db, force_create=True)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/models.py", line 944, in save
    await executor.execute_insert(self)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/executor.py", line 227, in execute_insert
    insert_result = await self.db.execute_insert(self.insert_query, values)
                    
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 34, in _translate_exceptions
    return await self._translate_exceptions(func, *args, **kwargs)
           
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 86, in _translate_exceptions
    raise IntegrityError(exc)
tortoise.exceptions.IntegrityError: duplicate key value violates unique constraint "user_pkey"
DETAIL:  Key (login)=(user1) already exists.

[2023-12-12 02:06:29.988] Exception in ASGI application
Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 408, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/applications.py", line 292, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/header.py", line 24, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/core/middlewares/logging.py", line 46, in dispatch
    response = typing.cast(StreamingResponse, await call_next(request))
                                              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 273, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/fastapi/routing.py", line 190, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/api/v1/auth.py", line 16, in register_handler
    return await service.register(request_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/services/auth.py", line 19, in register
    return await self.repo.create(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Desktop/University/Web/dns-shop/back/app/internal/repositories/db/user.py", line 17, in create
    user = await self.model.create(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/models.py", line 1136, in create
    await instance.save(using_db=db, force_create=True)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/models.py", line 944, in save
    await executor.execute_insert(self)
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base/executor.py", line 227, in execute_insert
    insert_result = await self.db.execute_insert(self.insert_query, values)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/base_postgres/client.py", line 34, in _translate_exceptions
    return await self._translate_exceptions(func, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/amer-on/Library/Caches/pypoetry/virtualenvs/dns-shop-backend-HlPyWJi7-py3.12/lib/python3.12/site-packages/tortoise/backends/asyncpg/client.py", line 86, in _translate_exceptions
    raise IntegrityError(exc)
tortoise.exceptions.IntegrityError: duplicate key value violates unique constraint "user_pkey"
DETAIL:  Key (login)=(user1) already exists.
